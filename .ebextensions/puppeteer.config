packages:
  yum:
    chromium: []

commands:
  install-chromium:
    command: 'echo Installing Chromium...'

    cwd: /tmp
    test: '[ ! -f /usr/bin/chromium-browser ]'
    ignoreErrors: true

    # Download and install the latest stable version of Chromium from the official repository.
    # Replace the URL with the one for your region if you're outside the US.
    # See https://www.chromium.org/getting-involved/download-chromium for details.
    # By default, Puppeteer expects Chromium to be installed in this location.
    # If you install it somewhere else, you'll need to set the executablePath option when launching Puppeteer.
    # For example: const browser = await puppeteer.launch({executablePath: '/path/to/chromium'})
    command: 'curl https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm -O'
    command: 'yum install -y ./google-chrome-stable_current_x86_64.rpm'

option_settings:
  # Increase the memory available to the Node.js process.
  aws:elasticbeanstalk:application:environment:
    NODE_OPTIONS: '--max-old-space-size=4096'

  # Set the path to the Chromium executable.
  aws:elasticbeanstalk:application:environment:
    CHROMIUM_PATH: '/usr/bin/chromium-browser'
